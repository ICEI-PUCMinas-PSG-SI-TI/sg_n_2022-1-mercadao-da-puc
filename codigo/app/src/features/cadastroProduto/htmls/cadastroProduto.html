<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/x-icon" href="../../../communs/res/img/PUC2.png">
  <title>Mercadão</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  
</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="../../home/view/htmls/home.html">Mercadão PUC</a>
    </div>
  </div>
</nav>
  
<div class="container">
  <h2>Cadastrar Produto</h2>
  <form id="formDescricao" method="post" >
    <div class="form-group">
      <label for="nome">Descrição:</label>
      <input type="descricao" class="form-control" id="descricao" placeholder="O que é o seu produto?" name="descricao">
    </div><br>
  <div class="form-group">
      <label for="nome">Preço Desejado:</label>
      <input type="text" class="form-control" id="preco" placeholder="Qual o preço do seu produto?" name="preco">
    </div><br>
  <div class="form-group">
      <label for="nome">Categorias:</label>
      <div class="radio">
  <label><input type="radio" value="Roupas" name="optCheck">Roupas</label>
</div>
<div class="radio">
  <label><input type="radio" value="Eletronicos" name="optCheck">Eletronicos</label>
</div>
    <div class="radio">
  <label><input type="radio" value="Acessorios" name="optCheck">Acessorios</label>
</div>
    <div class="radio">
  <label><input type="radio" value="Livros" name="optCheck">Livros</label>
</div>
    <div class="radio">
  <label><input type="radio" value="Esportes" name="optCheck">Esportes</label>
</div>
<div class="radio">
    <label><input type="radio" value="Serviços" name="optCheck">Serviços</label>
  </div>
    <div class="radio">
  <label><input type="radio" value="Outros" name="optCheck">Outros</label>
</div>
    </div><br>
    <div class="form-group">
  <label for="campus">Qual unidade você deseja entregar o produto?:</label>
  <select class="form-control" id="campui" onchange="atualizouUnidade()">
    <option value="Coração Eucaristico" selected>Coração Eucaristico </option>
    <option value="São Gabriel" >São Gabriel</option>
    <option value="Praça da Liberdade" >Praça da Liberdade</option>
    <option value="Barreiro" >Barreiro</option>
    <option value="Outro" >Outro</option>
  </select>
</div><br>
    <div class="form-group">
      <label>Estado do produto:</label>
      <label class="radio-inline"><input type="radio" name="optradio" value="Novo" checked>Novo</label>
      <label class="radio-inline"><input type="radio" name="optradio" value="Semi novo">Semi novo</label>
      <label class="radio-inline"><input type="radio" name="optradio" value="Usado">Usado</label>
    </div><br>
   
     <div class="form-group">
      <label for="marca">Marca:</label>
      <input type="marca" class="form-control" id="marca" placeholder="O produto possui marca?" name="marca">
    </div><br>
   
    
   
   <div class="form-group">
  <label for="sel1">Quantidade do produto:</label>
  <select class="form-control" id="sel1" onchange="atualizouQuantidade()">
    <option value="1" selected>1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
   <option value="5">5</option>
  </select>
</div>
   <div class="form-group">
 <label for="files">Adicionar foto:</label>  
<div style="width:100px;height:100px;border:dashed 1px #ccc;" id="view_photo"><img id='output' style="height:10px, width = 100px"></div>
<input type="file" name="files" />
</div><br>

<button type="button" class="btn btn-success" id="btnAdd">Cadastrar Produto</button>
<button type="button" class="btn btn-success" id="btnClean" onclick="clean()">Limpar</button>
<br>
 
  

</div>

<script>

  var files = document.querySelector('input[name="files"]');
  
  files.addEventListener("change", function(file){
    var input = file.target;
    
    var reader = new FileReader();
      
    reader.onload = function(){
        var dataURL = reader.result;
        var output = document.getElementById('output');
        output.src = dataURL;
      };
  
      reader.readAsDataURL(input.files[0]);
  });

  function atualizouUnidade() {
    let select1 = document.querySelector('#campui');
    let optionValue1 = select1.options[select1.selectedIndex];
    return optionValue1.value;
  }

  function atualizouQuantidade() {
    let select2 = document.querySelector('#sel1');
    let optionValue2 = select2.options[select2.selectedIndex];
    return optionValue2.text;
  } 

  let salvar = document.getElementById("btnAdd");

  salvar.addEventListener("click", function() {
      let produto = {
            descricao: document.getElementById('descricao').value,
            preco: document.getElementById('preco').value,
            categoria: document.querySelector('input[name="optCheck"]:checked').value,
            localEntrega: atualizouUnidade(),
            estadoDoProduto:  document.querySelector('input[name="optradio"]:checked').value,
            marca: document.getElementById('marca').value,
            quantidadeDoProduto: atualizouQuantidade(),
          }

          if (localStorage.getItem('produtos') == null) {
            localStorage.setItem('produtos', []);
            var caixaProdutos = [];
            caixaProdutos[caixaProdutos.length] = produto;
            console.log(JSON.stringify(caixaProdutos));
            localStorage.setItem('produtos', JSON.stringify(caixaProdutos));
          }else {
            var caixaProdutos = JSON.parse(localStorage.getItem('produtos'));
            caixaProdutos[caixaProdutos.length] = produto;
            localStorage.setItem('produtos', JSON.stringify(caixaProdutos));
            // console.log(localStorage.getItem('produtos').produtos);
            // let caixaProdutos = JSON.parse(localStorage.getItem('produtos'));
            // console.log(caixaProdutos);
          }
  });
  
  function clean() {
    localStorage.clear();
  }
</script>
</body>
</html>
